resources:
  containers: []
  repositories:
  - repository: rsg
    name: RocketSurgeonsGuild/AzureDevopsTemplates
    type: GitHub
    ref: refs/tags/v0.10.12
    endpoint: github
variables:
- name: 'CONFIGURATION'
  value: 'Release'
- name: 'VERBOSITY'
  value: 'Normal'
- name: 'COVERAGE'
  value: '$(Agent.BuildDirectory)/c'
- name: 'ARTIFACTS'
  value: '$(Build.ArtifactStagingDirectory)'
- name: 'DOTNET_SKIP_FIRST_TIME_EXPERIENCE'
  value: 'true'
- name: 'CodeCovToken'
  value: 'c93f6719-da50-4d00-ba2b-b73fd95239e0'
trigger:
  batch: true
  branches:
    include:
    - master
    - refs/tags/*
    exclude: []
  paths:
    include: []
    exclude:
    - '**/*.md'
    - .appveyor.yml
    - .codecov.yml
    - GitVersion.yml
    - GitReleaseManager.yaml
    - .vscode/*
    - .git*
    - .editorconfig
    - .nuke
    - LICENSE
pr:
  autoCancel: true
  branches:
    include:
    - master
    exclude: []
jobs:
- job: GitVersion
  displayName: GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: gittools.gitversion.gitversion-task.GitVersion@5
    inputs:
      configFilePath: GitVersion.yml
    displayName: GitVersion
- job: Ubuntu_BuildVersion
  displayName: Ubuntu - BuildVersion
  dependsOn:
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: BuildVersion --skip
    displayName: BuildVersion
- job: Ubuntu_Clean
  displayName: Ubuntu - Clean
  dependsOn:
  - Ubuntu_BuildVersion
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Clean --skip
    displayName: Clean
- job: Ubuntu_Restore
  displayName: Ubuntu - Restore
  dependsOn:
  - Ubuntu_Clean
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: DotnetToolRestore Restore --skip
    displayName: Restore
- job: Ubuntu_Build
  displayName: Ubuntu - Build
  dependsOn:
  - Ubuntu_Restore
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Build --skip
    displayName: Build
- job: Ubuntu_Test
  displayName: Ubuntu - Test
  dependsOn:
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Test Generate_Code_Coverage_Reports --skip
    displayName: Test
- job: Ubuntu_Pack
  displayName: Ubuntu - Pack
  dependsOn:
  - Ubuntu_Build
  - GitVersion
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Pack --skip
    displayName: Pack
- job: Windows_BuildVersion
  displayName: Windows - BuildVersion
  dependsOn:
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: BuildVersion --skip
    displayName: BuildVersion
- job: Windows_Clean
  displayName: Windows - Clean
  dependsOn:
  - Windows_BuildVersion
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Clean --skip
    displayName: Clean
- job: Windows_Restore
  displayName: Windows - Restore
  dependsOn:
  - Windows_Clean
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: DotnetToolRestore Restore --skip
    displayName: Restore
- job: Windows_Build
  displayName: Windows - Build
  dependsOn:
  - Windows_Restore
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Build --skip
    displayName: Build
- job: Windows_Test
  displayName: Windows - Test
  dependsOn:
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Test Generate_Code_Coverage_Reports --skip
    displayName: Test
- job: Windows_Pack
  displayName: Windows - Pack
  dependsOn:
  - Windows_Build
  - GitVersion
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: PowerShell@2
    inputs:
      targetType: FilePath
      filePath: build.ps1
      arguments: Pack --skip
    displayName: Pack
