resources:
  containers: []
  repositories:
  - repository: rsg
    name: RocketSurgeonsGuild/AzureDevopsTemplates
    type: GitHub
    ref: refs/tags/v0.10.12
    endpoint: github
variables:
- name: 'CONFIGURATION'
  value: 'Release'
- name: 'VERBOSITY'
  value: 'Normal'
- name: 'COVERAGE'
  value: '$(Agent.BuildDirectory)/c'
- name: 'ARTIFACTS'
  value: '$(Build.ArtifactStagingDirectory)'
- name: 'DOTNET_SKIP_FIRST_TIME_EXPERIENCE'
  value: 'true'
- name: 'CodeCovToken'
  value: 'c93f6719-da50-4d00-ba2b-b73fd95239e0'
trigger:
  batch: true
  branches:
    include:
    - master
    - refs/tags/*
    exclude: []
  paths:
    include: []
    exclude:
    - '**/*.md'
    - .appveyor.yml
    - .codecov.yml
    - GitVersion.yml
    - GitReleaseManager.yaml
    - .vscode/*
    - .git*
    - .editorconfig
    - .nuke
    - LICENSE
pr:
  autoCancel: true
  branches:
    include:
    - master
    exclude: []
jobs:
- job: Windows
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: gittools.gitversion.gitversion-task.GitVersion@5
    inputs:
      configFilePath: GitVersion.yml
    displayName: GitVersion
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 2.2.x
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 3.0.x
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: tool
      arguments: restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: BuildVersion --skip
    displayName: BuildVersion
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Restore --skip
    displayName: Restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Build --skip
    displayName: Build
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Test Generate_Code_Coverage_Reports --skip
    displayName: Test
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Pack --skip
    displayName: Pack
- job: Ubuntu
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: gittools.gitversion.gitversion-task.GitVersion@5
    inputs:
      configFilePath: GitVersion.yml
    displayName: GitVersion
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 2.2.x
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 3.0.x
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: tool
      arguments: restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: BuildVersion --skip
    displayName: BuildVersion
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Restore --skip
    displayName: Restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Build --skip
    displayName: Build
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Test Generate_Code_Coverage_Reports --skip
    displayName: Test
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Pack --skip
    displayName: Pack
- job: macOS
  pool:
    vmImage: 'macOS-latest'
  steps:
  - task: gittools.gitversion.gitversion-task.GitVersion@5
    inputs:
      configFilePath: GitVersion.yml
    displayName: GitVersion
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 2.2.x
  - name: UseDotNet@2
    inputs:
      packageType: Sdk
      version: 3.0.x
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: tool
      arguments: restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: BuildVersion --skip
    displayName: BuildVersion
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Restore --skip
    displayName: Restore
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Build --skip
    displayName: Build
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Test Generate_Code_Coverage_Reports --skip
    displayName: Test
  - name: DotNetCoreCLI@2
    inputs:
      command: Custom
      custom: nuke
      arguments: Pack --skip
    displayName: Pack
